<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LTE Primopredajnik: transmitter.ofdm.OFDMModulator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LTE Primopredajnik
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classtransmitter_1_1ofdm_1_1_o_f_d_m_modulator.html','','classtransmitter_1_1ofdm_1_1_o_f_d_m_modulator-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">transmitter.ofdm.OFDMModulator Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a368c66d260f99b35c5d06ea8ec6e753b" id="r_a368c66d260f99b35c5d06ea8ec6e753b"><td class="memItemLeft" align="right" valign="top"><a id="a368c66d260f99b35c5d06ea8ec6e753b" name="a368c66d260f99b35c5d06ea8ec6e753b"></a>
None&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, np.ndarray resource_grid, int|None new_fft_size=None)</td></tr>
<tr class="memitem:ae9bddd1a7a0c45c08a6121e170554fcd" id="r_ae9bddd1a7a0c45c08a6121e170554fcd"><td class="memItemLeft" align="right" valign="top">tuple[np.ndarray, int]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9bddd1a7a0c45c08a6121e170554fcd">modulate</a> (self)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8e2995ea802bcd04c972367930122cee" id="r_a8e2995ea802bcd04c972367930122cee"><td class="memItemLeft" align="right" valign="top"><a id="a8e2995ea802bcd04c972367930122cee" name="a8e2995ea802bcd04c972367930122cee"></a>
np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><b>resource_grid</b> = np.asarray(resource_grid)</td></tr>
<tr class="memitem:ab599861b92cb08595be8de61aa9a491a" id="r_ab599861b92cb08595be8de61aa9a491a"><td class="memItemLeft" align="right" valign="top"><a id="ab599861b92cb08595be8de61aa9a491a" name="ab599861b92cb08595be8de61aa9a491a"></a>
int|None&#160;</td><td class="memItemRight" valign="bottom"><b>new_fft_size</b> = new_fft_size</td></tr>
<tr class="memitem:a06393fcacbd51ab8ac92764b4651bda9" id="r_a06393fcacbd51ab8ac92764b4651bda9"><td class="memItemLeft" align="right" valign="top"><a id="a06393fcacbd51ab8ac92764b4651bda9" name="a06393fcacbd51ab8ac92764b4651bda9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>num_subcarriers</b></td></tr>
<tr class="memitem:a7d1fcaf95467d4520e808b4492a905e5" id="r_a7d1fcaf95467d4520e808b4492a905e5"><td class="memItemLeft" align="right" valign="top"><a id="a7d1fcaf95467d4520e808b4492a905e5" name="a7d1fcaf95467d4520e808b4492a905e5"></a>
np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><b>num_ofdm_symbols</b> = self.resource_grid.shape</td></tr>
<tr class="memitem:addd6c7066089cadb7d8a1f41c54658c3" id="r_addd6c7066089cadb7d8a1f41c54658c3"><td class="memItemLeft" align="right" valign="top"><a id="addd6c7066089cadb7d8a1f41c54658c3" name="addd6c7066089cadb7d8a1f41c54658c3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ndlrb</b> = self.num_subcarriers // 12</td></tr>
<tr class="memitem:aaabc8a44fbf0bb225360e18393a0d0d0" id="r_aaabc8a44fbf0bb225360e18393a0d0d0"><td class="memItemLeft" align="right" valign="top"><a id="aaabc8a44fbf0bb225360e18393a0d0d0" name="aaabc8a44fbf0bb225360e18393a0d0d0"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>normal_cp</b> = (self.num_ofdm_symbols % 14 == 0)</td></tr>
<tr class="memitem:aa521bf7404773518aa7ea37f9deaf03e" id="r_aa521bf7404773518aa7ea37f9deaf03e"><td class="memItemLeft" align="right" valign="top"><a id="aa521bf7404773518aa7ea37f9deaf03e" name="aa521bf7404773518aa7ea37f9deaf03e"></a>
tuple&#160;</td><td class="memItemRight" valign="bottom"><b>extended_cp</b> = (self.num_ofdm_symbols % 12 == 0)</td></tr>
<tr class="memitem:aeea2429ed8f0a13513833126c118f95b" id="r_aeea2429ed8f0a13513833126c118f95b"><td class="memItemLeft" align="right" valign="top"><a id="aeea2429ed8f0a13513833126c118f95b" name="aeea2429ed8f0a13513833126c118f95b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>num_subframes</b> = self.num_ofdm_symbols // 14</td></tr>
<tr class="memitem:a412beff5fd97f71d4d1b5017958b2b7a" id="r_a412beff5fd97f71d4d1b5017958b2b7a"><td class="memItemLeft" align="right" valign="top"><a id="a412beff5fd97f71d4d1b5017958b2b7a" name="a412beff5fd97f71d4d1b5017958b2b7a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>N</b> = self._determine_fft_size()</td></tr>
<tr class="memitem:af861e4f55fdf268a8860910cd04335a2" id="r_af861e4f55fdf268a8860910cd04335a2"><td class="memItemLeft" align="right" valign="top"><a id="af861e4f55fdf268a8860910cd04335a2" name="af861e4f55fdf268a8860910cd04335a2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>sample_rate</b> = self.N * 15000</td></tr>
<tr class="memitem:ae83a8300b660fb4fbed45eb3c0017268" id="r_ae83a8300b660fb4fbed45eb3c0017268"><td class="memItemLeft" align="right" valign="top"><a id="ae83a8300b660fb4fbed45eb3c0017268" name="ae83a8300b660fb4fbed45eb3c0017268"></a>
np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><b>Ncp</b> = multiplier * np.array([10] + [9] * 6)</td></tr>
<tr class="memitem:a2864d1ebe173199036526cacbd44db30" id="r_a2864d1ebe173199036526cacbd44db30"><td class="memItemLeft" align="right" valign="top"><a id="a2864d1ebe173199036526cacbd44db30" name="a2864d1ebe173199036526cacbd44db30"></a>
np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><b>Ecp</b> = multiplier * np.array([32] * 6)</td></tr>
<tr class="memitem:ae37e8c1cb1e2161e7ef8ef411aebf019" id="r_ae37e8c1cb1e2161e7ef8ef411aebf019"><td class="memItemLeft" align="right" valign="top"><a id="ae37e8c1cb1e2161e7ef8ef411aebf019" name="ae37e8c1cb1e2161e7ef8ef411aebf019"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>n_symbols_per_slot</b> = 7</td></tr>
<tr class="memitem:ae0560e1ee1146e333451b0712d28291d" id="r_ae0560e1ee1146e333451b0712d28291d"><td class="memItemLeft" align="right" valign="top"><a id="ae0560e1ee1146e333451b0712d28291d" name="ae0560e1ee1146e333451b0712d28291d"></a>
np.ndarray&#160;</td><td class="memItemRight" valign="bottom"><b>cp_lengths</b> = self.Ncp</td></tr>
<tr class="memitem:ae333e6b697f39a60df22c4b69c509c0c" id="r_ae333e6b697f39a60df22c4b69c509c0c"><td class="memItemLeft" align="right" valign="top"><a id="ae333e6b697f39a60df22c4b69c509c0c" name="ae333e6b697f39a60df22c4b69c509c0c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>output_length</b> = self.num_subframes * (self.N * 14 + 2 * self.Ncp[0] + 12 * self.Ncp[1])</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pro-methods" class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad43827f85811a9493172da1ee7acfe81" id="r_ad43827f85811a9493172da1ee7acfe81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad43827f85811a9493172da1ee7acfe81">_determine_fft_size</a> (self)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">OFDM modulator za LTE signale (downlink, baseband).

Ova klasa generiše vremenski OFDM talasni oblik iz LTE resource grida:
- mapira centralnih ``12 * NDLRB`` podnosioca u IFFT ulaz,
- postavlja DC bin na nulu,
- računa IFFT (skalirano sa ``N``),
- dodaje ciklički prefiks (CP) za svaki OFDM simbol,
- spaja sve simbole u jedan vremenski signal.

Parametri
----------
resource_grid : np.ndarray
    Kompleksna 2D matrica oblika ``(12*NDLRB, Nsym)`` gdje:
    - redovi predstavljaju podnosioca (subcarrier index u gridu),
    - kolone predstavljaju OFDM simbole.
new_fft_size : int, opcionalno
    Ručni override FFT veličine. Ako je zadano, mora biti u listi
    ``[128, 256, 512, 1024, 1408, 1536, 2048]`` i biće uzeto
    ``max(base_fft, new_fft_size)``.

Atributi
--------
ndlrb : int
    Broj downlink resource blokova (NDLRB), izveden iz broja podnosioca.
normal_cp : bool
    True ako je broj simbola djeljiv sa 14 (normal CP).
extended_cp : bool
    True ako je broj simbola djeljiv sa 12 (extended CP).
N : int
    FFT veličina koja se koristi za IFFT.
sample_rate : int
    Sampling frekvencija u Hz (``N * 15000``).
output_length : int
    Ukupan broj uzoraka vremenskog signala nakon dodavanja CP.

Raises
------
ValueError
    Ako `resource_grid` nije 2D, ako broj podnosioca nije višekratnik 12,
    ili ako broj OFDM simbola nije kompatibilan sa LTE (14 ili 12 po subfrejmu).
RuntimeError
    Ako dođe do nekonzistentnosti u popunjavanju izlaznog signala.

Primjer
-------
Minimalni primjer (NDLRB=6, 1 subframe, normal CP)::

    &gt;&gt;&gt; import numpy as np
    &gt;&gt;&gt; from transmitter.ofdm import OFDMModulator
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Prazan grid (72 podnosioca, 14 simbola)
    &gt;&gt;&gt; grid = np.zeros((72, 14), dtype=np.complex64)
    &gt;&gt;&gt;
    &gt;&gt;&gt; # Npr. ubaci jedan simbol na neki podnosioc/simbol
    &gt;&gt;&gt; grid[10, 0] = 1 + 1j
    &gt;&gt;&gt;
    &gt;&gt;&gt; ofdm = OFDMModulator(grid)
    &gt;&gt;&gt; waveform, fs = ofdm.modulate()
    &gt;&gt;&gt; waveform.shape
    (2048,)
    &gt;&gt;&gt; fs
    1920000
</pre> </div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="ad43827f85811a9493172da1ee7acfe81" name="ad43827f85811a9493172da1ee7acfe81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad43827f85811a9493172da1ee7acfe81">&#9670;&#160;</a></span>_determine_fft_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"> int transmitter.ofdm.OFDMModulator._determine_fft_size </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Određuje minimalnu FFT veličinu prema NDLRB.

Returns
-------
int
    FFT veličina (N) koja se koristi u IFFT.

Raises
------
ValueError
    Ako NDLRB nije podržan ili je `new_fft_size` nevalidan.
</pre> 
</div>
</div>
<a id="ae9bddd1a7a0c45c08a6121e170554fcd" name="ae9bddd1a7a0c45c08a6121e170554fcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9bddd1a7a0c45c08a6121e170554fcd">&#9670;&#160;</a></span>modulate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[np.ndarray, int] transmitter.ofdm.OFDMModulator.modulate </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Izvršava OFDM modulaciju nad resource gridom.

Za svaki OFDM simbol:
1) kreira IFFT ulaz dužine `N`,
2) mapira podnosioca oko DC bina (`N/2`) i ostavlja DC na nuli,
3) računa IFFT (skalirano: ``N * ifft``),
4) dodaje CP odgovarajuće dužine,
5) konkatenira u izlazni signal.

Returns
-------
output_waveform : np.ndarray
    Kompleksni vremenski signal sa CP (1D niz).
sample_rate : int
    Sampling frekvencija u Hz.

Raises
------
RuntimeError
    Ako dođe do prelaska preko `output_length` ili ako izlaz nije
    potpuno popunjen.

Primjer
-------
::

    &gt;&gt;&gt; import numpy as np
    &gt;&gt;&gt; from transmitter.ofdm import OFDMModulator
    &gt;&gt;&gt; grid = np.zeros((72, 14), dtype=np.complex64)
    &gt;&gt;&gt; grid[36, 0] = 1 + 0j
    &gt;&gt;&gt; ofdm = OFDMModulator(grid)
    &gt;&gt;&gt; y, fs = ofdm.modulate()
    &gt;&gt;&gt; y.shape[0] == ofdm.output_length
    True
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>transmitter/<b>ofdm.py</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>transmitter</b></li><li class="navelem"><b>ofdm</b></li><li class="navelem"><a href="classtransmitter_1_1ofdm_1_1_o_f_d_m_modulator.html">OFDMModulator</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
